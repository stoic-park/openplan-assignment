# 오픈플랜 사전과제

이 프로젝트는 사진을 조회하고 정보를 표시하는 웹 애플리케이션입니다. 터보레포 기반 모노레포로 구성되어 있으며, 컴포넌트 개발과 웹 애플리케이션이 분리되어 있습니다.

## 기술 스택

- **패키지 매니저**: pnpm
- **모노레포**: Turborepo
- **프레임워크**: Next.js (App Router)
- **상태 관리**:
  - Tanstack Query (서버 상태)
  - Zustand (클라이언트 상태 및 영속성)
- **스타일링**: CSS Modules
- **컴포넌트 문서화**: Storybook
- **코드 품질**: ESLint, Prettier
- **폰트**: Pretendard

## 프로젝트 구조

```
openplan-assignment/
├── apps/
│   ├── web/             # Next.js 웹 애플리케이션
│   └── storybook/       # 스토리북 설정 및 문서
├── packages/
│   └── ui/              # 공유 UI 컴포넌트
├── package.json         # 루트 패키지 설정
└── turbo.json           # Turborepo 설정
```

## 주요 기능

- **메인 페이지**: 사용자 소개 및 사진 조회 시작 버튼
- **결과 페이지**: 조회된 사진 표시 및 상세 정보 제공
- **자동 네비게이션**:
  - 사진 조회 이력이 있을 경우 메인 페이지에서 결과 페이지로 자동 이동
  - 사진 조회 이력이 없이 결과 페이지 접근 시 메인 페이지로 자동 이동
- **UI/UX 개선**:
  - 버튼 클릭 시 로딩 애니메이션
  - 스켈레톤 UI로 데이터 로딩 상태 표시
  - 반응형 디자인 (데스크탑, 태블릿, 모바일)
- **상태 관리**:
  - Tanstack Query를 사용한 API 데이터 관리
  - Zustand를 사용한 전역 상태 관리 및 로컬 스토리지 연동
- **404 페이지**: 존재하지 않는 경로 접근 시 사용자 친화적인 안내

## 설치 및 실행

### 필수 조건

- Node.js 18 이상
- pnpm 8.9.0 이상

### 설치

```bash
# 패키지 설치
pnpm install
```

### 개발 서버 실행

```bash
# 모든 워크스페이스 개발 서버 실행
pnpm dev

# 웹 애플리케이션만 실행
pnpm --filter web dev

# 스토리북만 실행
pnpm --filter storybook dev
```

### 빌드

```bash
# 모든 워크스페이스 빌드
pnpm build

# 웹 애플리케이션만 빌드
pnpm --filter web build
```

## 구현 세부 사항

### UI 컴포넌트

- **Button**: 다양한 상태(기본, 비활성화, 로딩)를 지원하는 재사용 가능한 버튼 컴포넌트
  - CSS 변수를 사용한 테마 설정
  - 로딩 상태에서 스피너 애니메이션 표시
  - 호버 및 활성 상태에 따른 스타일 변화

### 페이지

- **메인 페이지**: 사용자 소개 및 사진 조회 시작 버튼
  - 사진 조회 이력이 있을 경우 자동 네비게이션
  - 버튼 클릭 시 로딩 애니메이션

- **결과 페이지**: 조회된 사진 및 상세 정보 표시
  - 사진 조회 이력이 없을 경우 메인 페이지로 자동 리다이렉트
  - 스켈레톤 UI를 통한 로딩 상태 표시
  - 사진을 배경으로 사용한 레이아웃

- **404 페이지**: 존재하지 않는 경로 접근 시 사용자 친화적인 안내
  - 메인 페이지로 돌아가는 버튼 제공

### 상태 관리

- **Tanstack Query**: API 데이터 관리
  - 캐싱 및 재시도 로직
  - 로딩/에러 상태 관리

- **Zustand**: 전역 상태 관리
  - 현재 조회 중인 사진 ID 관리
  - 사진 조회 이력 관리 및 로컬 스토리지 연동

### 최적화

- **버튼 상태 관리**:
  - 초기에는 디바운스/스로틀링을 적용했으나, 자동 네비게이션 로직과 충돌 발생
  - 단순한 상태 플래그(`isLoading`, `showAutoNavMessage`)를 사용하여 중복 클릭 방지 로직으로 변경
  - 로딩 애니메이션을 통한 사용자 피드백 제공
- **자동 네비게이션 최적화**:
  - 컴포넌트 마운트 시 한 번만 실행되도록 의존성 배열 최적화
  - 타이머 정리 로직 추가로 메모리 누수 방지
  - 상태 관리 단순화로 예측 가능한 동작 보장
- **스켈레톤 UI**: 데이터 로딩 중 사용자 경험 개선
- **반응형 디자인**: 다양한 화면 크기에 대응
